export const LIURENG_GOD_TEXTS = {
	子: {
		title: `神后子神`,
		meta: `女虚危，十二月将，蝠鼠燕，音商。`,
		poem: `阴私彩女奸，逃亡鬼神官。
悲泣浴盆事，燕鼠盗贼垣。`,
		explain: `水神也。《抱朴子》：“岁毕酒醮蜡祭，以报百神。”故曰神后。`,
		kind: `类象：父母，大豆，宅舍，彩妇，奸邪，阴贼，盗贼，死亡，鬼神，祈祷，浴盆，~~王候~~「王侯」，土工。`,
	},
	丑: {
		title: `大吉丑神`,
		meta: `斗牛，十一月将，獬牛蟹，音商。`,
		poem: `将军举荐贤，机谋长者冤。
雨师风伯贵，车牛畜宅田。`,
		explain: `土神也。阳时复居其位而化，故曰大吉。`,
		kind: `类象：长者，风伯，雨师，田宅，六畜，车牛，贵人，征召，爵禄，荐贤，机谋，地祗，土工，田宅，结仇，官，将军。`,
	},
	寅: {
		title: `功曹寅神`,
		meta: `尾箕，十月将，背，虎豹狸，音宫。`,
		poem: `道士见书籍，斑纹红火炬。
督师征召吏，猫狸谒木林。`,
		explain: `木神也。万物长旺，功臣计事论功，故曰功曹。`,
		kind: `类象：天文，文书，林木，召招，谒见，火炬，斑纹，诚信，管事，督师，吏，道士。`,
	},
	卯: {
		title: `太冲卯神`,
		meta: `九月将，手，氐房心，貉兔狐，音角。`,
		poem: `术士沙门类，舟车水陆因。
林木仗雷电，兄弟匿浪人。`,
		explain: `木神也。万物离散，支干斗毁若冲，故曰太冲。`,
		kind: `类象：兄弟，公主，沙门，妇女，栗，棒杖，车船，远行，林士，伏匿，地泽，炉，杓门，棺椁，天心，民市，边方，浪子，雨水，私贼。`,
	},
	辰: {
		title: `天罡辰神`,
		meta: `八月将，胸，角亢，蛇龙虫，音宫。`,
		poem: `郡守鱼龙物，网罗诈恶人。
兵伐死刑具，左目宰杀神。`,
		explain: `土神也。万物关固根条，以定核坚，故曰天罡。`,
		kind: `类象：女娠，恶人，战斗，杀伐，死丧，金关，鱼网，宰杀，天罗，死尸，主兵，欺诈，刑具。`,
	},
	巳: {
		title: `太乙巳神`,
		meta: `七月将，翼轸，蛇蚓蝉，音角。`,
		poem: `蝉鸣虫解散，宾姑歌骂诅。
灶炉煎关钥，横祸蛇引灾。`,
		explain: `火神也。万物毕秀，生穗结实，故曰太乙。`,
		kind: `类象：骂詈，灾非，姑，赏赐，关钥，木公，宾客，解散，歌儿，灶，死丧。`,
	},
	午: {
		title: `胜光午神`,
		meta: `六月将，目，柳星张，獐马鹿，音商。`,
		poem: `宫女口舌妃，贼兵惊惧言。
善人行巷路，诚信使君安。`,
		explain: `火神也。万一物长大，其根本愈于所在，故曰胜光。`,
		kind: `类象：小豆，田宅，贼兵，道路，惊恐，口舌，妇女，巷路，土公，信诚，善人，使君，亭长，长，左。`,
	},
	未: {
		title: `小吉未神`,
		meta: `五月将，井鬼，鹰羊雁，音徵。`,
		poem: `姑姨婚礼仪，酒羊祀神祗。
老翁讼婆母，井泉墓风师。`,
		explain: `土神也。万物小成，阴气始生，以奉阳，故曰小吉。`,
		kind: `类象：五味，姑嫂，酒食，酒舍，风师，天井，公讼，婚姻，机谋，冢墓，鬼道，祈祷，家鬼，老妇，老翁。`,
	},
	申: {
		title: `传送申神`,
		meta: `四月将，筋骨，觜参，猿猴狁，音宫。`,
		poem: `刀兵僧及医，道路税湖池。
劫攻丧仇怨，市贾田猎师。`,
		explain: `金神也，万物茂盛于气，所传而毕达，故曰传送。`,
		kind: `类象：市贾，远送，猎师，刀兵，大麦，仇怨，死丧，刀师，城池，道路，湖池，税买，路人，碓磨，盗贼。`,
	},
	酉: {
		title: `从魁酉神`,
		meta: `三月将，耳，胃昴结，鸡雉鸟，音商。`,
		poem: `金玉小刀钱，阴私近水边。
奴婢并赏赐，鸡禽神庙缘。`,
		explain: `金神也。万物皆发生长，枝叶茎从根而出，故曰从魁。`,
		kind: `类象：姨婢，宫女，小麦，神庙，私门，九江，金钱，刀鞘，尾吏，内门，大客，官禄，边兵，玉匮，水泽。`,
	},
	戌: {
		title: `河魁戌神`,
		meta: `二月将，足，奎娄，狗豺狼，音商。`,
		poem: `印绶吏都官，垒土集众攒。
婢奴兼长者，豺狼犬畜欢。`,
		explain: `土神也。万物皆生根本，以类合日，故曰河魁。`,
		kind: `类象：印绶，奴仆，计都，狱吏，狱事，聚众，长者，垒土，收容，敛瓶，明水，地网，兵神，德合，城钟。`,
	},
	亥: {
		title: `登明亥神`,
		meta: `正月将，头，室壁，猪狳熊，音角。`,
		poem: `天柱禀楼台，盗贼幼子哀。
厕秽猪溺死，阴钥征召来。`,
		explain: `水神也。始建征，万河资始，故曰登明。`,
		kind: `类象：柱台，厕狱，管钥，神明，不净，溺死，上客，夫人，小儿，征召，杀贼，伤人，死丧，猪。`,
	},
};

export const LIURENG_GENERAL_TEXTS = {
	贵人: {
		title: `天乙`,
		poem: `天乙持魁钺，谒贵宜求恩。
拜官迁秩禄，争讼入公门。
生旺承恩召，伤衰忌怒嗔。
病发寒热症，祟非鬼乃神。`,
		explain: `主清御。
天乙贵人属己丑土，在天应十二神，在地表十二野，在岁为十二经，为宗天天乙者，所以统类驭众、推流祸福有应验也。
假令甲日，在丑为旦，在未为夜，在乙丑属金，在辛未属土。贵人顺行吉，逆行凶，比和吉，不比和凶。此大略也。在丑谓之升堂，相比顺则吉。又看侍从之神，在吉则吉，在凶则凶。其他神将皆仿此断之。`,
		kind: `天乙临十二神：
子——沐浴。
丑——升堂。
寅——按籍，于公中求望。
卯——荷项，不利于进游。
辰——天乙不临
巳——趋朝，有进望之喜。
午——午轩，有诏命之喜。
未——饮食，有小惠之事。
申——起途，主有进动。
酉——入室，主阴私暗昧不明。
戌——天乙不临
亥——操笏，主求谒吉。
辰戌为牢狱，贵人不临之地。
若临空亡，忧喜皆不成。《经》言：“空亡之课若何？当忧不忧，当喜不喜。若两火一金，金被消铄。二水一火，火乃灭光。如贵人临乙丑为金，临亥则乙亥为火，火欲克金，有水为救，不能相克，有鬼贼不足为忧。若贵人乘辛未土，下临癸酉金，金土相生，比吉之象。其或贵人乘寅，得壬寅金，下临甲辰火，火乃炼金，得丙午水，为灾消散。”`,
	},
	螣蛇: {
		title: `螣蛇`,
		poem: `螣蛇骠骑尉，火神惊难安。
君忧官失位，民斗魂恐残。
生旺灾未发，刑克祸现前。
病发肢目肿，水木杀深冤。`,
		explain: `螣蛇之神，为骠骑尉。其元属丁巳火。火旺六十日。
其吉：主文字、虚惊、公信、小才。水火之交。
其凶：则惊骇怪梦之事、火光釜鸣、官私是非之事。
若旺相比和则吉，若休囚则得灾，空亡减半。
《经》言：“螣蛇生我无祸，克我有祸。”`,
		kind: `螣蛇临十二神：
子——掩目，不能伤人，又名堕水。
丑——入穴，自藏。
寅——生角，旺吉衰凶。
卯——当门，伤人，主人口灾。
辰——自蟠，可远不可近。
巳——飞天，尤吉。
午——乘雾，有进望之心。
未——秘隐，入林忧疑自散，食中有病。
申——衔刀，拔剑，有怪异官事。
酉——露齿，必见口舌。
戌——睡眠，其忧自散。
亥——入水，不为灾害。`,
	},
	腾蛇: {
		title: `螣蛇`,
		poem: `螣蛇骠骑尉，火神惊难安。
君忧官失位，民斗魂恐残。
生旺灾未发，刑克祸现前。
病发肢目肿，水木杀深冤。`,
		explain: `螣蛇之神，为骠骑尉。其元属丁巳火。火旺六十日。
其吉：主文字、虚惊、公信、小才。水火之交。
其凶：则惊骇怪梦之事、火光釜鸣、官私是非之事。
若旺相比和则吉，若休囚则得灾，空亡减半。
《经》言：“螣蛇生我无祸，克我有祸。”`,
		kind: `螣蛇临十二神：
子——掩目，不能伤人，又名堕水。
丑——入穴，自藏。
寅——生角，旺吉衰凶。
卯——当门，伤人，主人口灾。
辰——自蟠，可远不可近。
巳——飞天，尤吉。
午——乘雾，有进望之心。
未——秘隐，入林忧疑自散，食中有病。
申——衔刀，拔剑，有怪异官事。
酉——露齿，必见口舌。
戌——睡眠，其忧自散。
亥——入水，不为灾害。`,
	},
	朱雀: {
		title: `朱雀`,
		poem: `朱雀羽林军，霹雳卷火神。
文书忧考校，财帛竞纷纭。
生旺和合事，伤衰被官嗔。
病发心腹呕，须看子午辰。`,
		explain: `朱雀之神，属丙午火。夏旺三个月。
其吉：主文书、印信、王诰、敕命、服色、王庭之事。
其灾：主口舌、公讼、捆绑、文字、财帛损失、虚诈，马畜疾病。`,
		kind: `朱雀临十二神：
子——损翼，不能移动。
丑——掩目，又曰破头。
寅——安巢，疾病。
卯——栖林。
辰——敛翼，人归。
巳——翱翔，外事高远。
午——衔符，有文书口舌。
未——啄食，求财吉。
申——励嘴。
酉——夜鸣。
戌——无毛，不能动。
亥——沐浴，灾忧自退。
大抵吉则论其为祥，凶则言其不利。损羽无毛，皆是自伤；夜鸣励嘴，并是为怪。加之不比相克，是其凶兆。`,
	},
	六合: {
		title: `六合`,
		poem: `六合是丈夫，婚姻吉相扶。
得财迁禄位，亲会酒欢娱。
生旺媒产吉，伤衰取奸遗。
病发心腹痛，司命祭当苏。`,
		explain: `六合之神，其元属乙卯木。
其吉：主信息、婚姻、求望、财物和合、交易、谦逊之事。
其戾：主阴私不明、先喜后忧，小人女子之过，伤失六畜。`,
		kind: `六合临十二神：
子——操笏，见人求上吉。
丑——眼疾，眼病。
寅——乘轩，婚姻。
卯——入户，在家不动。
辰——持巾，将动人意。
巳——贽书，信远。
午——升堂，半遂无格。
未——素服，白衣。
申——披发，成合。
酉——洗足，能进。
戌——登途，进动。
亥——乘辂，出所求吉。`,
	},
	勾陈: {
		title: `勾陈`,
		poem: `土将勾陈前，兵刑讼留连。
掩逃擒盗贼，争妇及田园。
生旺犹合理，伤衰系迟延。
病者肿瘫苦，祟在丘土垣。`,
		explain: `勾陈之神，其元属戊辰土。旺四季月。
其吉：主官职、印信、公庭、虎符、田宅、上舍。
其戾：主六害、疾病、蹇厄、骨肉、公讼、牵连、失财。
庶人得此应，官员见之为印绶。盛吉衰凶，又主小吉。`,
		kind: `勾陈临十二神：
子——临庭，官事。
丑——入化，出入随朝。
寅——受制，官事。
卯——入狱，官人业田宅。
辰——升户，司墓田、公讼、官事，随动。
巳——捧印，转职迁进。
午——反目，百事乖，无田。
未——在驿，宜出行。
申——趋门。
酉——病足，难言。
戌——佩剑，有害。
亥——濯衣，改革。`,
	},
	青龙: {
		title: `青龙`,
		poem: `青龙天丞相，富贵钱礼仪。
君官迁美职，民财送乡耆。
生旺尤喜美，伤衰贫可泣。
病热心肠疾，为殃速请医。`,
		explain: `青龙之神，其元属甲寅木。旺春三月。
其吉：主文字、财帛、舟车、林木、衣服、书契、文昌、官职、府庭、僧道、高人。
其戾：主哭泣、疾病、失财、走失、畜类、陷溺。`,
		kind: `青龙临十二神：
子——游海。
丑——蟠泥，失滞。
寅——乘云，得雨。
卯——戏珠，弄水，有喜。
辰——闭目，为意。
巳——飞天，利动得意。
午——无尾，损伤。
未——伏陆、无鳞，斗伤。
申——无鳞，折角，久困。
酉——折角，退守难进。
戌——施雨，出入劳力。
亥——入水，求财。`,
	},
	天空: {
		title: `天空`,
		poem: `天空司直官，奸谋事多端。
君子逢谗佞，常人被欺瞒。
生旺奴婢喜，伤衰系丧残。
病胸有痰气，井灶作祟患。`,
		explain: `天空之神，其元属戊戌土。旺于四季。
其吉：主奴婢、公吏、市井小人、财帛、言约、私契。
其戾：主奴婢唇吻、脱空不实、虚伪巧诈是非。
辰戌丑未四月最旺。天空可以成小事，不可以成大事。`,
		kind: `天空临十二神：
子——小人，寒厄。
丑——伏尸。
寅——犯事，争讼口舌。
卯——守制，谩语。
辰——虚诈。
巳——临户，摇舌、是非机巧。
午——入化，小用吉。
未——主施空物。
申——鼓舌，词讼。
酉——出户，执言、碎事、相蒙未决。
戌——主惊怖。
亥——儒冠，小事、利遗失。`,
	},
	白虎: {
		title: `白虎`,
		poem: `白虎廷尉卿，丧病狱囚萦。
君失官流血，民伤杀身倾。
生旺财福竞，伤衰系沉冥。
病头痛疽患，祟是路死兵。`,
		explain: `白虎之神，其元属庚申金。旺秋三月。
其吉：主道路、信息、兵牒兵戈、动众、威权、财帛、犬马、金银宝物。
其戾：主孝服、哭泣、疾病、怪异、凶恶、杀伐、灾害不明、血光之忧。
白虎问妊吉，问病嫌。`,
		kind: `白虎临十二神：
子——渡江，沉海，恐惧无害。
丑——直视，谋望。
寅——出林，过路往还恐害。
卯——伏穴，不能动。
辰——露牙，沿山、夜行、害财、奸私。
巳——烧身，死丧疾病。
午——断尾，有始无终。
未——登山，乘权、出入、狱凶。
申——衔牒，道路、文信通。
酉——当路，害人之意。
戌——闭目，无害。
亥——睡眠，有忧之事。`,
	},
	太常: {
		title: `太常`,
		poem: `太常太常卿，华服彩盛明。
正官荣爵贵，移徙酒逢迎。
生旺绶吉庆，伤衰盗失惊。
病肢头腹疾，祟新可追寻。`,
		explain: `太常之神，其元属己未土。旺于四季，每季十八日。
其吉：主文章、印绶、公裳、服饰、信息、交关。
其戾：主遗失公文、窃盗衣裳、哭泣不美之状、公私牵系，又主小微窃盗。`,
		kind: `太常临十二神：
子——持印，吉。荷项，相侵奸盗。
丑——列席，请美丰。
寅——侧口，恶人相争。
卯——遗冠。
辰——荆项，一云荷项。
巳——铸印，转职。
午——乘辂，上人筵会。
未——窥户，列席。
申——捧印，转职迁官。
酉——立券，忧物，动望征求。
戌——入狱。
亥——聘召，贵人请合私谋。`,
	},
	玄武: {
		title: `元武`,
		poem: `元武后将军，盗贼奸邪陈。
捕逃车马失，淫乱离乡群。
生旺多聪智，伤衰有祸迍。
病患腰腹胀，祟殃河潭神。`,
		explain: `元武之神，其元属癸亥水。旺冬三月。
其吉：主聪明多智、文章俊巧、求望财物、干谒贵人。
其戾：主盗贼、奸诈小人、君子阴私不明、走失疾病、鬼魅梦想之事。`,
		kind: `元武临十二神：
子——过海，出入进动。
丑——立云，虚诈失物。
寅——披发，虚喜。
卯——窥户，盗贼失物。
辰——入狱，官事相争。
巳——洗足，不宜动。
午——拔剑，能害人。
未——朝天，利见大人。
申——按剑，战有害。
酉——持戟，相争。
戌——持戟，相争。
亥——真冠，尊贵，家人为鬼。`,
	},
	元武: {
		title: `元武`,
		poem: `元武后将军，盗贼奸邪陈。
捕逃车马失，淫乱离乡群。
生旺多聪智，伤衰有祸迍。
病患腰腹胀，祟殃河潭神。`,
		explain: `元武之神，其元属癸亥水。旺冬三月。
其吉：主聪明多智、文章俊巧、求望财物、干谒贵人。
其戾：主盗贼、奸诈小人、君子阴私不明、走失疾病、鬼魅梦想之事。`,
		kind: `元武临十二神：
子——过海，出入进动。
丑——立云，虚诈失物。
寅——披发，虚喜。
卯——窥户，盗贼失物。
辰——入狱，官事相争。
巳——洗足，不宜动。
午——拔剑，能害人。
未——朝天，利见大人。
申——按剑，战有害。
酉——持戟，相争。
戌——持戟，相争。
亥——真冠，尊贵，家人为鬼。`,
	},
	太阴: {
		title: `太阴`,
		poem: `太阴中丞位，蔽匿阴私频。
君罪名出入，小人惊诈生。
生旺成婚礼，伤衰为谴惩。
病肢腰足损，灶神为祸祟。`,
		explain: `太阴之神，其元属辛酉金。旺秋三月。
其吉：主宫帷、妇女、财帛、金银财物。
其戾：为阴私损失、私谋、谋事迟速未成、远信未至、疾病未痊。`,
		kind: `太阴临十二神：
子——垂帘，隔听。
丑——守屈，宜动。
寅——失鞋，难动。
卯——沐浴，失理。
辰——理冠，求就。
巳——伏枕，近思。
午——披发，私忧。
未——持书，信动。
申——阴谋，法服、婚姻。
酉——入室，不宜动。
戌——绣裳，婚姻。
亥——妊娠，阴人病。`,
	},
	天后: {
		title: `天后`,
		poem: `天后宫彩嫔，禁锢莫情循。
君子延宾客，常人议私姻。
生旺妻易产，伤衰女奸淫。
病人患肠痢，祟有水鬼吟。`,
		explain: `天后之神，其元属壬子水。旺冬季。
其吉：主后妃、宫庭、人家私事。
其戾：主帷簿不修、私事不明、欺诈不实、脏腑之疾、小人走失，主玉堂。`,
		kind: `天后临十二神：
子——守闺，欲动。
丑——出户，阴私。
寅——理发，取财成病。
卯——倚门，相望。
辰——毁装，血病。
巳——裸体，失礼。
午——倚枕，难合忧鬼。
未——沐浴，失礼。
申——理装，生产婚姻。
酉——把镜，婚姻。
戌——撩帷，自息之意。
亥——治事。`,
	},
};

export function getLiuRengGodText(branch){
	return LIURENG_GOD_TEXTS[branch] || null;
}

const LIURENG_BRANCH_SET = new Set(['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥']);

function normalizeBranch(branch){
	const txt = `${branch || ''}`.trim();
	return LIURENG_BRANCH_SET.has(txt) ? txt : '';
}

function extractGeneralBranchKindLine(kindText, branch){
	const zhi = normalizeBranch(branch);
	if(!kindText || !zhi){
		return '';
	}
	const lines = splitTextLines(kindText);
	const reg = new RegExp(`^\\s*${zhi}\\s*[—-]{1,2}\\s*(.+)$`);
	for(let i=0; i<lines.length; i++){
		const match = `${lines[i] || ''}`.match(reg);
		if(match && match[1]){
			return `${match[1]}`.trim();
		}
	}
	return '';
}

function buildGeneralBranchKindText(textObj, branch){
	if(!textObj || !textObj.kind){
		return '';
	}
	const zhi = normalizeBranch(branch);
	if(!zhi){
		return '';
	}
	const line = extractGeneralBranchKindLine(textObj.kind, zhi);
	if(!line){
		return '';
	}
	const title = `${textObj.title || ''}`.trim() || '天将';
	return `${title}临${zhi}：${line}`;
}

export function getLiuRengGeneralText(name, branch){
	if(!name){
		return null;
	}
	const text = `${name}`.trim();
	const matched = LIURENG_GENERAL_TEXTS[text] || null;
	if(!matched){
		return null;
	}
	const branchKind = buildGeneralBranchKindText(matched, branch);
	if(!branchKind){
		return matched;
	}
	return {
		...matched,
		kind: branchKind,
	};
}

function splitTextLines(txt){
	if(!txt){
		return [];
	}
	return `${txt}`.replace(/\r\n/g, '\n').split('\n');
}

export function buildLiuRengTooltipObj(textObj, fallbackTitle){
	if(!textObj){
		return {
			title: fallbackTitle || '六壬释义',
			tips: ['暂无释义'],
		};
	}
	const title = textObj.title || fallbackTitle || '六壬释义';
	const tips = [];
	if(textObj.meta){
		tips.push(...splitTextLines(textObj.meta));
	}
	if(textObj.poem){
		if(tips.length){
			tips.push('');
		}
		tips.push('# 诗句');
		tips.push(...splitTextLines(textObj.poem));
	}
	if(textObj.explain){
		if(tips.length){
			tips.push('');
		}
		tips.push('# 释义');
		tips.push(...splitTextLines(textObj.explain));
	}
	if(textObj.kind){
		if(tips.length){
			tips.push('');
		}
		tips.push('# 类象');
		tips.push(...splitTextLines(textObj.kind));
	}
	if(!tips.length){
		tips.push('暂无释义');
	}
	return {
		title,
		tips,
	};
}
